<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>@kineticcafe/release-metadata - v2.0.0</title><meta name="description" content="Documentation for @kineticcafe/release-metadata - v2.0.0"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">@kineticcafe/release-metadata - v2.0.0</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><h1>@kineticcafe/release-metadata - v2.0.0 </h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><div class="tsd-panel tsd-typography">
<a href="#release-metadata" id="release-metadata" style="color: inherit; text-decoration: none;">
  <h1>release-metadata</h1>
</a>
<p>Generates and provides release metadata for the current application.</p>
<pre><code class="language-json"><span class="hl-0">{</span><br/><span class="hl-0">  </span><span class="hl-1">&quot;name&quot;</span><span class="hl-0">: </span><span class="hl-2">&quot;release-metadata&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-1">&quot;timestamp&quot;</span><span class="hl-0">: </span><span class="hl-2">&quot;20210706195814&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-1">&quot;repos&quot;</span><span class="hl-0">: [</span><br/><span class="hl-0">    {</span><br/><span class="hl-0">      </span><span class="hl-1">&quot;ref&quot;</span><span class="hl-0">: </span><span class="hl-2">&quot;b7ebeb23c2dfbd9bba637a91cccfaa2fe0860108&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">      </span><span class="hl-1">&quot;url&quot;</span><span class="hl-0">: </span><span class="hl-2">&quot;https://github.com/KineticCafe/release-metadata-ts.git&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">      </span><span class="hl-1">&quot;name&quot;</span><span class="hl-0">: </span><span class="hl-2">&quot;release-metadata-ts&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">      </span><span class="hl-1">&quot;type&quot;</span><span class="hl-0">: </span><span class="hl-2">&quot;git&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">      </span><span class="hl-1">&quot;source_path&quot;</span><span class="hl-0">: </span><span class="hl-2">&quot;/home/halostatue/projects/kineticcafe/release-metadata/release-metadata-ts&quot;</span><br/><span class="hl-0">    }</span><br/><span class="hl-0">  ],</span><br/><span class="hl-0">  </span><span class="hl-1">&quot;source_path&quot;</span><span class="hl-0">: </span><span class="hl-2">&quot;/home/halostatue/projects/kineticcafe/release-metadata/release-metadata-ts&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-1">&quot;packages&quot;</span><span class="hl-0">: [</span><br/><span class="hl-0">    {</span><br/><span class="hl-0">      </span><span class="hl-1">&quot;name&quot;</span><span class="hl-0">: </span><span class="hl-2">&quot;node&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">      </span><span class="hl-1">&quot;versions&quot;</span><span class="hl-0">: {</span><br/><span class="hl-0">        </span><span class="hl-1">&quot;node&quot;</span><span class="hl-0">: </span><span class="hl-2">&quot;16.4.0&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-1">&quot;v8&quot;</span><span class="hl-0">: </span><span class="hl-2">&quot;9.1.269.36-node.14&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-1">&quot;uv&quot;</span><span class="hl-0">: </span><span class="hl-2">&quot;1.41.0&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-1">&quot;zlib&quot;</span><span class="hl-0">: </span><span class="hl-2">&quot;1.2.11&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-1">&quot;brotli&quot;</span><span class="hl-0">: </span><span class="hl-2">&quot;1.0.9&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-1">&quot;ares&quot;</span><span class="hl-0">: </span><span class="hl-2">&quot;1.17.1&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-1">&quot;modules&quot;</span><span class="hl-0">: </span><span class="hl-2">&quot;93&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-1">&quot;nghttp2&quot;</span><span class="hl-0">: </span><span class="hl-2">&quot;1.43.0&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-1">&quot;napi&quot;</span><span class="hl-0">: </span><span class="hl-2">&quot;8&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-1">&quot;llhttp&quot;</span><span class="hl-0">: </span><span class="hl-2">&quot;6.0.2&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-1">&quot;openssl&quot;</span><span class="hl-0">: </span><span class="hl-2">&quot;1.1.1k&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-1">&quot;cldr&quot;</span><span class="hl-0">: </span><span class="hl-2">&quot;39.0&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-1">&quot;icu&quot;</span><span class="hl-0">: </span><span class="hl-2">&quot;69.1&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-1">&quot;tz&quot;</span><span class="hl-0">: </span><span class="hl-2">&quot;2021a&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-1">&quot;unicode&quot;</span><span class="hl-0">: </span><span class="hl-2">&quot;13.0&quot;</span><br/><span class="hl-0">      }</span><br/><span class="hl-0">    }</span><br/><span class="hl-0">  ]</span><br/><span class="hl-0">}</span>
</code></pre>

<a href="#usage" id="usage" style="color: inherit; text-decoration: none;">
  <h2>Usage</h2>
</a>
<p>There are two use cases for <code>ReleaseMetadata</code>:</p>
<ul>
<li>generating a release metadata file for inclusion in a release package;</li>
<li>presenting a release metadata collection output through an API.</li>
</ul>

<a href="#generating-metadata" id="generating-metadata" style="color: inherit; text-decoration: none;">
  <h3>Generating Metadata</h3>
</a>
<p>Release metadata can be generated for the current application repository with
<code>npm exec release-metadata --save</code>. There are numerous options available for the
<code>release-metadata</code> command-line:</p>
<ul>
<li><code>--path &lt;PATH&gt;</code>: The path and/or filename for the metadata (implies --save)</li>
<li><code>--save</code>: Writes release-metadata.json to the current directory</li>
<li><code>--no-save</code>: Prints to standard output instead of saving, used with --path for
reading only</li>
<li><code>--merge [ORIGINAL]</code>: Merges the generated release metadata with an existing
file. If just <code>--merge</code> is provided, the original file does not need to exist;
if <code>--merge ORIGINAL</code> is provided, the original file must exist. Incompatible
with <code>--merge-original</code>.</li>
<li><code>--merge-original &lt;ORIGINAL&gt;</code>: Merges the generated release metadata with the
original file (the generated data overrides the original data)</li>
<li><code>--merge-overlay &lt;OVERLAY&gt;</code>: Merges the overlay file with the generated
release metadata (the overlay overrides the generated data)</li>
<li><code>--branch &lt;BRANCH&gt;</code>: The default git branch to use, if not main or master</li>
<li><code>--remote &lt;REMOTE&gt;</code>: The default git remote to use, if not origin</li>
<li><code>--no-git</code>: Disables git processing</li>
<li><code>--secure</code>: Resolves only to a secure version of the output</li>
<li><code>--secure-if-production</code>: Resolves to a secure version if <code>NODE_ENV</code> is
production</li>
<li><code>--omit-repo-url</code>: Eliminates the repo URL</li>
<li><code>--release-name &lt;NAME&gt;</code>: The value to use as the release name</li>
<li><code>--timestamp &lt;TIMESTAMP&gt;</code>: The timestamp to use</li>
</ul>
<p>Both <code>--merge-original</code> and <code>--merge-overlay</code> may be used at the same time. See
<a href="modules.html#ConfigOptions">ConfigOptions</a> for more information.</p>
<p>This metadata file can be manipulated by other tools to include more
information, if desired, such as the current version of Node.js, or it can
merge an existing metadata file when <code>--merge</code> is provided.</p>
<p>The timestamp value can be overridden by setting <code>RELEASE_TIMESTAMP</code> in
OS environment variables.</p>

<a href="#programmatic-generation" id="programmatic-generation" style="color: inherit; text-decoration: none;">
  <h4>Programmatic Generation</h4>
</a>
<p>It is possible to write your own script to generate the release metadata so that
it can become part of a build or packaging script. The script will look
something like this:</p>
<pre><code class="language-javascript"><span class="hl-3">import</span><span class="hl-0"> { </span><span class="hl-4">generate</span><span class="hl-0"> } </span><span class="hl-3">from</span><span class="hl-0"> </span><span class="hl-2">&#39;@kineticcafe/release-metadata&#39;</span><br/><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">config</span><span class="hl-0"> = {</span><br/><span class="hl-0">  </span><span class="hl-7">// Set configuration options here. See ConfigOptions documentation for</span><br/><span class="hl-0">  </span><span class="hl-7">// details.</span><br/><span class="hl-0">  </span><span class="hl-4">path:</span><span class="hl-0"> </span><span class="hl-2">&#39;release.json&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-4">name:</span><span class="hl-0"> </span><span class="hl-2">&#39;my-package&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">}</span><br/><br/><span class="hl-8">generate</span><span class="hl-0">(</span><span class="hl-4">config</span><span class="hl-0">).</span><span class="hl-8">then</span><span class="hl-0">((</span><span class="hl-4">processed</span><span class="hl-0">) </span><span class="hl-5">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-7">// Do something with the processed metadata.</span><br/><span class="hl-0">})</span>
</code></pre>

<a href="#presenting-metadata" id="presenting-metadata" style="color: inherit; text-decoration: none;">
  <h3>Presenting Metadata</h3>
</a>
<p>Use the <code>create</code> function to read and process the release metadata for
presentation from an API.</p>
<pre><code class="language-javascript"><span class="hl-7">// ./release-metadata.mjs</span><br/><span class="hl-3">import</span><span class="hl-0"> { </span><span class="hl-4">create</span><span class="hl-0"> } </span><span class="hl-3">from</span><span class="hl-0"> </span><span class="hl-2">&#39;@kineticcafe/release-metadata&#39;</span><br/><br/><span class="hl-3">export</span><span class="hl-0"> </span><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">releaseMetadata</span><span class="hl-0"> = </span><span class="hl-8">create</span><span class="hl-0">()</span>
</code></pre>
<p>The output of <code>create()</code> is an async function that returns a release metadata
map that could be used in an <code>express</code> handler, for example:</p>
<pre><code class="language-javascript"><span class="hl-3">import</span><span class="hl-0"> { </span><span class="hl-4">releaseMetadata</span><span class="hl-0"> } </span><span class="hl-3">from</span><span class="hl-0"> </span><span class="hl-2">&#39;./release-metadata.mjs&#39;</span><br/><br/><span class="hl-4">express</span><span class="hl-0">.</span><span class="hl-8">get</span><span class="hl-0">(</span><span class="hl-2">&#39;/release&#39;</span><span class="hl-0">, </span><span class="hl-5">async</span><span class="hl-0"> (</span><span class="hl-4">_req</span><span class="hl-0">, </span><span class="hl-4">res</span><span class="hl-0">, </span><span class="hl-4">_next</span><span class="hl-0">) </span><span class="hl-5">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-4">res</span><span class="hl-0">.</span><span class="hl-8">send</span><span class="hl-0">(</span><span class="hl-3">await</span><span class="hl-0"> </span><span class="hl-8">releaseMetadata</span><span class="hl-0">())</span><br/><span class="hl-0">})</span>
</code></pre>

<a href="#static-presentation" id="static-presentation" style="color: inherit; text-decoration: none;">
  <h4>Static Presentation</h4>
</a>
<p>Use the <code>createStatic</code> function to read and process the release metadata and
return a static release metadata map.</p>
<pre><code class="language-javascript"><span class="hl-7">// ./release-metadata.mjs</span><br/><span class="hl-3">import</span><span class="hl-0"> { </span><span class="hl-4">createStatic</span><span class="hl-0"> } </span><span class="hl-3">from</span><span class="hl-0"> </span><span class="hl-2">&#39;@kineticcafe/release-metadata&#39;</span><br/><br/><span class="hl-3">export</span><span class="hl-0"> </span><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">releaseMetadata</span><span class="hl-0"> = </span><span class="hl-8">createStatic</span><span class="hl-0">({ </span><span class="hl-4">secure:</span><span class="hl-0"> </span><span class="hl-5">true</span><span class="hl-0"> })</span><br/><br/><span class="hl-7">// app.mjs</span><br/><span class="hl-3">import</span><span class="hl-0"> { </span><span class="hl-4">releaseMetadata</span><span class="hl-0"> } </span><span class="hl-3">from</span><span class="hl-0"> </span><span class="hl-2">&#39;./release-metadata.mjs&#39;</span><br/><br/><span class="hl-4">express</span><span class="hl-0">.</span><span class="hl-8">get</span><span class="hl-0">(</span><span class="hl-2">&#39;/release&#39;</span><span class="hl-0">, (</span><span class="hl-4">_req</span><span class="hl-0">, </span><span class="hl-4">res</span><span class="hl-0">, </span><span class="hl-4">_next</span><span class="hl-0">) </span><span class="hl-5">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-4">res</span><span class="hl-0">.</span><span class="hl-8">send</span><span class="hl-0">(</span><span class="hl-4">releaseMetadata</span><span class="hl-0">)</span><br/><span class="hl-0">})</span>
</code></pre>

<a href="#installation" id="installation" style="color: inherit; text-decoration: none;">
  <h2>Installation</h2>
</a>
<pre><code class="language-sh"><span class="hl-7"># Pick your poison:</span><br/><span class="hl-0">$ npm install @kineticcafe/release-metadata </span><span class="hl-7"># OR</span><br/><span class="hl-0">$ yarn install @kineticcafe/release-metadata </span><span class="hl-7"># OR</span><br/><span class="hl-0">$ pnpm install @kineticcafe/release-metadata</span>
</code></pre>
<p>If the only purpose is the generation of a release metadata file from the
command-line, release-metadata may be installed as a development dependency:</p>
<pre><code class="language-sh"><span class="hl-0">$ npm install -D @kineticcafe/release-metadata </span><span class="hl-7"># OR</span><br/><span class="hl-0">$ yarn install -D @kineticcafe/release-metadata </span><span class="hl-7"># OR</span><br/><span class="hl-0">$ pnpm install -D @kineticcafe/release-metadata</span>
</code></pre>

<a href="#licence" id="licence" style="color: inherit; text-decoration: none;">
  <h2>Licence</h2>
</a>
<p>Licensed under the MIT licence.</p>

<a href="#community-and-contributing" id="community-and-contributing" style="color: inherit; text-decoration: none;">
  <h2>Community and Contributing</h2>
</a>
<p>We welcome your contributions, as described in <a href="Contributing.md">Contributing.md</a>. Like all
Kinetic Cafe <a href="https://github.com/KineticCafe">open source projects</a>, is under the Kinetic Cafe Open Source
<a href="https://github.com/KineticCafe/code-of-conduct">Code of Conduct</a>.</p>
</div></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class="current"><a href="modules.html">Exports</a></li></ul></nav><nav class="tsd-navigation secondary menu-sticky"><ul><li class="tsd-kind-type-alias"><a href="modules.html#ApplicationFn" class="tsd-kind-icon">Application<wbr/>Fn</a></li><li class="tsd-kind-type-alias"><a href="modules.html#ConfigOptions" class="tsd-kind-icon">Config<wbr/>Options</a></li><li class="tsd-kind-type-alias"><a href="modules.html#GitBranchTestFunction" class="tsd-kind-icon">Git<wbr/>Branch<wbr/>Test<wbr/>Function</a></li><li class="tsd-kind-type-alias"><a href="modules.html#GitOptions" class="tsd-kind-icon">Git<wbr/>Options</a></li><li class="tsd-kind-type-alias"><a href="modules.html#JSONObject" class="tsd-kind-icon">JSONObject</a></li><li class="tsd-kind-type-alias"><a href="modules.html#JSONValue" class="tsd-kind-icon">JSONValue</a></li><li class="tsd-kind-type-alias"><a href="modules.html#MergeOptions" class="tsd-kind-icon">Merge<wbr/>Options</a></li><li class="tsd-kind-type-alias"><a href="modules.html#PackageInfo" class="tsd-kind-icon">Package<wbr/>Info</a></li><li class="tsd-kind-type-alias"><a href="modules.html#ProcessedMetadata" class="tsd-kind-icon">Processed<wbr/>Metadata</a></li><li class="tsd-kind-type-alias"><a href="modules.html#ReleaseMetadata" class="tsd-kind-icon">Release<wbr/>Metadata</a></li><li class="tsd-kind-type-alias"><a href="modules.html#RepoInfo" class="tsd-kind-icon">Repo<wbr/>Info</a></li><li class="tsd-kind-type-alias"><a href="modules.html#SecureReleaseMetadata" class="tsd-kind-icon">Secure<wbr/>Release<wbr/>Metadata</a></li><li class="tsd-kind-type-alias"><a href="modules.html#SecureRepoInfo" class="tsd-kind-icon">Secure<wbr/>Repo<wbr/>Info</a></li><li class="tsd-kind-type-alias"><a href="modules.html#SecurityFilterFn" class="tsd-kind-icon">Security<wbr/>Filter<wbr/>Fn</a></li><li class="tsd-kind-type-alias"><a href="modules.html#SecurityOptions" class="tsd-kind-icon">Security<wbr/>Options</a></li><li class="tsd-kind-function"><a href="modules.html#create" class="tsd-kind-icon">create</a></li><li class="tsd-kind-function"><a href="modules.html#createStatic" class="tsd-kind-icon">create<wbr/>Static</a></li><li class="tsd-kind-function"><a href="modules.html#generate" class="tsd-kind-icon">generate</a></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="assets/main.js"></script></body></html>