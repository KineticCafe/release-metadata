<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>@kineticcafe/release-metadata - v1.1.0</title>
	<meta name="description" content="Documentation for @kineticcafe/release-metadata - v1.1.0">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="assets/css/main.css">
	<script async src="assets/js/search.js" id="search-script"></script>
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="assets/js/search.json" data-base=".">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="index.html" class="title">@kineticcafe/release-metadata - v1.1.0</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
							<input type="checkbox" id="tsd-filter-externals" checked />
							<label class="tsd-widget" for="tsd-filter-externals">Externals</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<h1>@kineticcafe/release-metadata - v1.1.0</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<div class="tsd-panel tsd-typography">
				<a href="#release-metadata" id="release-metadata" style="color: inherit; text-decoration: none;">
					<h1>release-metadata</h1>
				</a>
				<p>Generates and provides release metadata for the current application.</p>
				<pre><code class="language-json"><span style="color: #000000">{</span>
<span style="color: #000000">  </span><span style="color: #0451A5">&quot;name&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;release-metadata&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">  </span><span style="color: #0451A5">&quot;timestamp&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;20210706195814&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">  </span><span style="color: #0451A5">&quot;repos&quot;</span><span style="color: #000000">: [</span>
<span style="color: #000000">    {</span>
<span style="color: #000000">      </span><span style="color: #0451A5">&quot;ref&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;b7ebeb23c2dfbd9bba637a91cccfaa2fe0860108&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">      </span><span style="color: #0451A5">&quot;url&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;https://github.com/KineticCafe/release-metadata-ts.git&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">      </span><span style="color: #0451A5">&quot;name&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;release-metadata-ts&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">      </span><span style="color: #0451A5">&quot;type&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;git&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">      </span><span style="color: #0451A5">&quot;source_path&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;/Users/austin/dev/oss/kineticcafe/release-metadata/release-metadata-ts&quot;</span>
<span style="color: #000000">    }</span>
<span style="color: #000000">  ],</span>
<span style="color: #000000">  </span><span style="color: #0451A5">&quot;source_path&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;/Users/austin/dev/oss/kineticcafe/release-metadata/release-metadata-ts&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">  </span><span style="color: #0451A5">&quot;packages&quot;</span><span style="color: #000000">: [</span>
<span style="color: #000000">    {</span>
<span style="color: #000000">      </span><span style="color: #0451A5">&quot;name&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;node&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">      </span><span style="color: #0451A5">&quot;versions&quot;</span><span style="color: #000000">: {</span>
<span style="color: #000000">        </span><span style="color: #0451A5">&quot;node&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;16.4.0&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #0451A5">&quot;v8&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;9.1.269.36-node.14&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #0451A5">&quot;uv&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;1.41.0&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #0451A5">&quot;zlib&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;1.2.11&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #0451A5">&quot;brotli&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;1.0.9&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #0451A5">&quot;ares&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;1.17.1&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #0451A5">&quot;modules&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;93&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #0451A5">&quot;nghttp2&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;1.43.0&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #0451A5">&quot;napi&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;8&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #0451A5">&quot;llhttp&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;6.0.2&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #0451A5">&quot;openssl&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;1.1.1k&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #0451A5">&quot;cldr&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;39.0&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #0451A5">&quot;icu&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;69.1&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #0451A5">&quot;tz&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;2021a&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #0451A5">&quot;unicode&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;13.0&quot;</span>
<span style="color: #000000">      }</span>
<span style="color: #000000">    }</span>
<span style="color: #000000">  ]</span>
<span style="color: #000000">}</span>
</code></pre>
				<a href="#usage" id="usage" style="color: inherit; text-decoration: none;">
					<h2>Usage</h2>
				</a>
				<p>There are two use cases for <code>ReleaseMetadata</code>:</p>
				<ul>
					<li>generating a release metadata file for inclusion in a release package;</li>
					<li>presenting a release metadata collection output through an API.</li>
				</ul>
				<a href="#generating-metadata" id="generating-metadata" style="color: inherit; text-decoration: none;">
					<h3>Generating Metadata</h3>
				</a>
				<p>Release metadata can be generated for the current application repository with
					<code>npm exec release-metadata --save</code>. There are numerous options available for the
				<code>release-metadata</code> command-line:</p>
				<ul>
					<li><code>--path &lt;path&gt;</code>: The path and/or filename for the metadata (implies --save)</li>
					<li><code>--save</code>: Writes release-metadata.json to the current directory</li>
					<li><code>--no-save</code>: Prints to standard output instead of saving, used with --path for
					reading only</li>
					<li><code>--merge [original]</code>: Merges the generated release metadata with an existing
						file, uses <code>--path</code> unless <code>original</code> is provided and incompatible with
					<code>--merge-original</code>.</li>
					<li><code>--merge-original &lt;original&gt;</code>: Merges the generated release metadata with the
					original file (the generated data overrides the original data)</li>
					<li><code>--merge-overlay &lt;overlay&gt;</code>: Merges the overlay file with the generated
					release metadata (the overlay overrides the generated data)</li>
					<li><code>--branch &lt;branch&gt;</code>: The default git branch to use, if not main or master</li>
					<li><code>--remote &lt;remote&gt;</code>: The default git remote to use, if not origin</li>
					<li><code>--no-git</code>: Disables git processing</li>
					<li><code>--secure</code>: Resolves only to a secure version of the output</li>
					<li><code>--secure-if-production</code>: Resolves to a secure version if <code>NODE_ENV</code> is
					production</li>
					<li><code>--omit-repo-url</code>: Eliminates the repo URL</li>
					<li><code>--release-name &lt;name&gt;</code>: The value to use as the release name</li>
					<li><code>--timestamp &lt;timestamp&gt;</code>: The timestamp to use</li>
				</ul>
				<p>Both <code>--merge-original</code> and <code>--merge-overlay</code> may be used at the same time. See
				<a href="modules.html#configoptions">ConfigOptions</a> for more information.</p>
				<p>This metadata file can be manipulated by other tools to include more
					information, if desired, such as the current version of Node.js, or it can
				merge an existing metadata file when <code>--merge</code> is provided.</p>
				<p>The timestamp value can be overridden by setting <code>RELEASE_TIMESTAMP</code> in
				OS environment variables.</p>
				<a href="#programmatic-generation" id="programmatic-generation" style="color: inherit; text-decoration: none;">
					<h4>Programmatic Generation</h4>
				</a>
				<p>It is possible to write your own script to generate the release metadata so that
					it can become part of a build or packaging script. The script will look
				something like this:</p>
				<pre><code class="language-javascript"><span style="color: #AF00DB">import</span><span style="color: #000000"> { </span><span style="color: #001080">generate</span><span style="color: #000000"> } </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;@kineticcafe/release-metadata&#039;</span>

<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">config</span><span style="color: #000000"> = {</span>
<span style="color: #000000">  </span><span style="color: #008000">// Set configuration options here. See ConfigOptions documentation for</span>
<span style="color: #000000">  </span><span style="color: #008000">// details.</span>
<span style="color: #000000">  </span><span style="color: #001080">path:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;release.json&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">  </span><span style="color: #001080">name:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;my-package&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">}</span>

<span style="color: #795E26">generate</span><span style="color: #000000">(</span><span style="color: #001080">config</span><span style="color: #000000">).</span><span style="color: #795E26">then</span><span style="color: #000000">((</span><span style="color: #001080">processed</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span>
<span style="color: #000000">  </span><span style="color: #008000">// Do something with the processed metadata.</span>
<span style="color: #000000">})</span>
</code></pre>
				<a href="#presenting-metadata" id="presenting-metadata" style="color: inherit; text-decoration: none;">
					<h3>Presenting Metadata</h3>
				</a>
				<p>Use the <code>create</code> function to read and process the release metadata for
				presentation from an API.</p>
				<pre><code class="language-javascript"><span style="color: #008000">// ./release-metadata.mjs</span>
<span style="color: #AF00DB">import</span><span style="color: #000000"> { </span><span style="color: #001080">create</span><span style="color: #000000"> } </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;@kineticcafe/release-metadata&#039;</span>

<span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">releaseMetadata</span><span style="color: #000000"> = </span><span style="color: #795E26">create</span><span style="color: #000000">()</span>
</code></pre>
				<p>The output of <code>create()</code> is an async function that returns a release metadata
				map that could be used in an <code>express</code> handler, for example:</p>
				<pre><code class="language-javascript"><span style="color: #AF00DB">import</span><span style="color: #000000"> { </span><span style="color: #001080">releaseMetadata</span><span style="color: #000000"> } </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;./release-metadata.mjs&#039;</span>

<span style="color: #001080">express</span><span style="color: #000000">.</span><span style="color: #795E26">get</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;/release&#039;</span><span style="color: #000000">, </span><span style="color: #0000FF">async</span><span style="color: #000000"> (</span><span style="color: #001080">_req</span><span style="color: #000000">, </span><span style="color: #001080">res</span><span style="color: #000000">, </span><span style="color: #001080">_next</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span>
<span style="color: #000000">  </span><span style="color: #001080">res</span><span style="color: #000000">.</span><span style="color: #795E26">send</span><span style="color: #000000">(</span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #795E26">releaseMetadata</span><span style="color: #000000">())</span>
<span style="color: #000000">})</span>
</code></pre>
				<a href="#static-presentation" id="static-presentation" style="color: inherit; text-decoration: none;">
					<h4>Static Presentation</h4>
				</a>
				<p>Use the <code>createStatic</code> function to read and process the release metadata and
				return a static release metadata map.</p>
				<pre><code class="language-javascript"><span style="color: #008000">// ./release-metadata.mjs</span>
<span style="color: #AF00DB">import</span><span style="color: #000000"> { </span><span style="color: #001080">createStatic</span><span style="color: #000000"> } </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;@kineticcafe/release-metadata&#039;</span>

<span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">releaseMetadata</span><span style="color: #000000"> = </span><span style="color: #795E26">createStatic</span><span style="color: #000000">({ </span><span style="color: #001080">secure:</span><span style="color: #000000"> </span><span style="color: #0000FF">true</span><span style="color: #000000"> })</span>

<span style="color: #008000">// app.mjs</span>
<span style="color: #AF00DB">import</span><span style="color: #000000"> { </span><span style="color: #001080">releaseMetadata</span><span style="color: #000000"> } </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;./release-metadata.mjs&#039;</span>

<span style="color: #001080">express</span><span style="color: #000000">.</span><span style="color: #795E26">get</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;/release&#039;</span><span style="color: #000000">, (</span><span style="color: #001080">_req</span><span style="color: #000000">, </span><span style="color: #001080">res</span><span style="color: #000000">, </span><span style="color: #001080">_next</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span>
<span style="color: #000000">  </span><span style="color: #001080">res</span><span style="color: #000000">.</span><span style="color: #795E26">send</span><span style="color: #000000">(</span><span style="color: #001080">releaseMetadata</span><span style="color: #000000">)</span>
<span style="color: #000000">})</span>
</code></pre>
				<a href="#installation" id="installation" style="color: inherit; text-decoration: none;">
					<h2>Installation</h2>
				</a>
				<pre><code class="language-sh"><span style="color: #008000"># Pick your poison:</span>
<span style="color: #000000">npm install @kineticcafe/release-metadata</span>
<span style="color: #000000">yarn install @kineticcafe/release-metadata</span>
<span style="color: #000000">pnpm install @kineticcafe/release-metadata</span>
</code></pre>
				<p>If the only purpose is the generation of a release metadata file from the
				command-line, release-metadata may be installed as a development dependency:</p>
				<pre><code class="language-sh"><span style="color: #000000">npm install -D @kineticcafe/release-metadata</span>
<span style="color: #000000">yarn install -D @kineticcafe/release-metadata</span>
<span style="color: #000000">pnpm install -D @kineticcafe/release-metadata</span>
</code></pre>
				<a href="#license" id="license" style="color: inherit; text-decoration: none;">
					<h2>License</h2>
				</a>
				<p>Licensed under the MIT license.</p>
				<a href="#community-and-contributing" id="community-and-contributing" style="color: inherit; text-decoration: none;">
					<h2>Community and Contributing</h2>
				</a>
				<p>We welcome your contributions, as described in <a href="Contributing.md">Contributing.md</a>. Like all
					Kinetic Cafe <a href="https://github.com/KineticCafe">open source projects</a>, is under the Kinetic Cafe Open Source
				<a href="https://github.com/KineticCafe/code-of-conduct">Code of Conduct</a>.</p>
			</div>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class=" ">
						<a href="modules.html">Exports</a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
					<li class=" tsd-kind-type-alias">
						<a href="modules.html#applicationfn" class="tsd-kind-icon">Application<wbr>Fn</a>
					</li>
					<li class=" tsd-kind-type-alias">
						<a href="modules.html#configoptions" class="tsd-kind-icon">Config<wbr>Options</a>
					</li>
					<li class=" tsd-kind-type-alias">
						<a href="modules.html#gitbranchtestfunction" class="tsd-kind-icon">Git<wbr>Branch<wbr>Test<wbr>Function</a>
					</li>
					<li class=" tsd-kind-type-alias">
						<a href="modules.html#gitoptions" class="tsd-kind-icon">Git<wbr>Options</a>
					</li>
					<li class=" tsd-kind-type-alias">
						<a href="modules.html#jsonobject" class="tsd-kind-icon">JSONObject</a>
					</li>
					<li class=" tsd-kind-type-alias">
						<a href="modules.html#jsonvalue" class="tsd-kind-icon">JSONValue</a>
					</li>
					<li class=" tsd-kind-type-alias">
						<a href="modules.html#mergeoptions" class="tsd-kind-icon">Merge<wbr>Options</a>
					</li>
					<li class=" tsd-kind-type-alias">
						<a href="modules.html#packageinfo" class="tsd-kind-icon">Package<wbr>Info</a>
					</li>
					<li class=" tsd-kind-type-alias">
						<a href="modules.html#processedmetadata" class="tsd-kind-icon">Processed<wbr>Metadata</a>
					</li>
					<li class=" tsd-kind-type-alias">
						<a href="modules.html#releasemetadata" class="tsd-kind-icon">Release<wbr>Metadata</a>
					</li>
					<li class=" tsd-kind-type-alias">
						<a href="modules.html#repoinfo" class="tsd-kind-icon">Repo<wbr>Info</a>
					</li>
					<li class=" tsd-kind-type-alias">
						<a href="modules.html#securereleasemetadata" class="tsd-kind-icon">Secure<wbr>Release<wbr>Metadata</a>
					</li>
					<li class=" tsd-kind-type-alias">
						<a href="modules.html#securerepoinfo" class="tsd-kind-icon">Secure<wbr>Repo<wbr>Info</a>
					</li>
					<li class=" tsd-kind-type-alias">
						<a href="modules.html#securityfilterfn" class="tsd-kind-icon">Security<wbr>Filter<wbr>Fn</a>
					</li>
					<li class=" tsd-kind-type-alias">
						<a href="modules.html#securityoptions" class="tsd-kind-icon">Security<wbr>Options</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="modules.html#create" class="tsd-kind-icon">create</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="modules.html#createstatic" class="tsd-kind-icon">create<wbr>Static</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="modules.html#generate" class="tsd-kind-icon">generate</a>
					</li>
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer class="with-border-bottom">
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
		</div>
	</div>
</footer>
<div class="container tsd-generator">
	<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p>
</div>
<div class="overlay"></div>
<script src="assets/js/main.js"></script>
</body>
</html>